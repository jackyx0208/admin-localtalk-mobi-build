(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[38],{1775:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return N}));var s=a(1),i=a(1349),n=a(32),c=a(1281),l=a(309),r=a(403),o=a(399),d=a(25),b=a(82),u=a(395),j=a(1297),x=a(3),m=a(12),O=a.n(m),h=a(20),v=a(162),p=a(230),f=a(1261),g=a(1291),w=a(614),y=a(1259),S=a(1289),W=a(1290),k=a(1715),U=a(198),P=a(1178),C=a(1250),L=a(21),V=a(1299),F=a(396),R=a(237),_=a(0);function D(e){var t=e.currentUser,a=e.userSpecialPermissions,s=e.parameterSettings,i=Object(n.h)(),c=Object(v.useSnackbar)().enqueueSnackbar,l=t?"user"!==t.role&&"s-user"!==t.role||!a?t.role:"s-user":"",r=a&&a.max_coverage||s&&s.settings.default_coverage||150,o=Object(p.c)({enableReinitialize:!0,initialValues:{name:(null===t||void 0===t?void 0:t.name)||"",email:(null===t||void 0===t?void 0:t.email)||"",password:"",gender:t&&t.gender>-1?t.gender:"",role:l||"",coverage:(null===t||void 0===t?void 0:t.coverage)||50,max_coverage:r,location:t?"".concat(t.location.coordinates[1],", ").concat(t.location.coordinates[0]):"",fixedLocation:(null===t||void 0===t?void 0:t.fixedLocation)||"",phoneNumber:(null===t||void 0===t?void 0:t.phoneNumber)||"",address:(null===t||void 0===t?void 0:t.address)||"",country:(null===t||void 0===t?void 0:t.country)||"",state:(null===t||void 0===t?void 0:t.state)||"",city:(null===t||void 0===t?void 0:t.city)||"",zipCode:(null===t||void 0===t?void 0:t.zipCode)||"",avatarUrl:t&&"".concat(R.b.baseUrl,"/user/img-src/").concat(t.avatarUrl)||null,isVerified:(null===t||void 0===t?void 0:t.isVerified)||!0,status:null===t||void 0===t?void 0:t.status,online:(null===t||void 0===t?void 0:t.online)||!1,onlineStatus:(null===t||void 0===t?void 0:t.online)?"online":"offline",username:(null===t||void 0===t?void 0:t.username)||"",note:(null===t||void 0===t?void 0:t.note)||"",credit:(null===t||void 0===t?void 0:t.credit)||"0 %",balance:(null===t||void 0===t?void 0:t.balance)||"$ 0"},onSubmit:function(){var e=Object(h.a)(O.a.mark((function e(t,a){var s,n,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.setSubmitting,n=a.resetForm,l=a.setErrors,e.prev=1,e.next=4,Object(V.a)(500);case 4:return e.next=6,L.a.put("/user/manage-users?username=".concat(t.username),t);case 6:n(),s(!1),c("Update success",{variant:"success"}),i(d.b.user.list),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),s(!1),l(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,a){return e.apply(this,arguments)}}()}),b=o.errors,u=o.values,j=o.touched,m=o.handleSubmit,D=o.setFieldValue,E=o.getFieldProps;return Object(_.jsx)(p.b,{value:o,children:Object(_.jsx)(p.a,{noValidate:!0,autoComplete:"off",onSubmit:m,children:Object(_.jsxs)(f.a,{container:!0,spacing:3,children:[Object(_.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(_.jsxs)(g.a,{sx:{py:10,px:3},children:[Object(_.jsx)(F.a,{color:"active"!==u.status?"error":"success",sx:{textTransform:"uppercase",position:"absolute",top:24,right:24},children:u.status}),Object(_.jsxs)(w.a,{sx:{mb:5},children:[Object(_.jsx)(y.a,{src:u.avatarUrl}),Object(_.jsx)(S.a,{error:!0,sx:{px:2,textAlign:"center"},children:j.avatarUrl&&b.avatarUrl})]}),Object(_.jsx)(W.a,{labelPlacement:"start",control:Object(_.jsx)(k.a,{disabled:!0,onChange:function(e){return D("status",e.target.checked?"banned":"active")},checked:"active"!==u.status}),label:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(U.a,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),Object(_.jsx)(U.a,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),Object(_.jsx)(W.a,{labelPlacement:"start",control:Object(_.jsx)(k.a,Object(x.a)(Object(x.a)({disabled:!0},E("isVerified")),{},{checked:u.isVerified})),label:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(U.a,{variant:"subtitle2",sx:{mb:.5},children:"Email Verified"}),Object(_.jsx)(U.a,{variant:"body2",sx:{color:"text.secondary"},children:"Disabling this will automatically send the user a verification email"})]}),sx:{mx:0,width:1,justifyContent:"space-between"}})]})}),Object(_.jsx)(f.a,{item:!0,xs:12,md:8,children:Object(_.jsx)(g.a,{sx:{p:3},children:Object(_.jsxs)(P.a,{spacing:3,children:[Object(_.jsxs)(P.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(_.jsx)(C.a,Object(x.a)({disabled:!0,inputProps:{readOnly:!0},fullWidth:!0,label:"Email"},E("email"))),Object(_.jsx)(C.a,Object(x.a)({disabled:!0,inputProps:{readOnly:!0},fullWidth:!0,label:"Nickname"},E("name")))]}),Object(_.jsxs)(P.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(_.jsxs)(C.a,Object(x.a)(Object(x.a)({select:!0,fullWidth:!0,label:"Gender"},E("gender")),{},{SelectProps:{native:!0},disabled:!0,children:[Object(_.jsx)("option",{value:""}),Object(_.jsx)("option",{value:"0",children:"Male"},"male"),Object(_.jsx)("option",{value:"1",children:"Female"},"female"),Object(_.jsx)("option",{value:"2",children:"Business"},"business")]})),Object(_.jsx)(C.a,Object(x.a)({disabled:!0,fullWidth:!0,label:"Role"},E("role")))]}),Object(_.jsxs)(P.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(_.jsx)(C.a,Object(x.a)({disabled:!0,fullWidth:!0,label:"Credit"},E("credit"))),Object(_.jsx)(C.a,Object(x.a)({disabled:!0,fullWidth:!0,label:"Balance"},E("balance")))]}),Object(_.jsxs)(P.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(_.jsx)(C.a,Object(x.a)({disabled:!0,fullWidth:!0,label:"Status"},E("onlineStatus"))),Object(_.jsx)(C.a,Object(x.a)({disabled:!0,fullWidth:!0,label:"Punishment"},E("punishment")))]}),Object(_.jsxs)(P.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(_.jsx)(C.a,Object(x.a)({disabled:!0,fullWidth:!0,label:"Coverage"},E("coverage"))),Object(_.jsx)(C.a,Object(x.a)({disabled:!0,fullWidth:!0,label:"Max Coverage"},E("max_coverage")))]}),Object(_.jsxs)(P.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(_.jsx)(C.a,Object(x.a)({disabled:!0,fullWidth:!0,label:"Location"},E("country"))),Object(_.jsx)(C.a,Object(x.a)({disabled:!0,fullWidth:!0,label:"Latitude and logintude"},E("location")))]}),Object(_.jsx)(P.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:Object(_.jsx)(C.a,Object(x.a)({disabled:!0,fullWidth:!0,label:"Registration Date"},E("created")))}),Object(_.jsx)(P.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:Object(_.jsx)(C.a,Object(x.a)({disabled:!0,fullWidth:!0,label:"Note",multiline:!0,minRows:4,maxRows:4},E("note")))})]})})})]})})})}var E=a(1458);function N(){var e=Object(b.a)().themeStretch,t=Object(l.c)(),a=Object(n.i)().userId,x=Object(l.d)((function(e){return e.user})),m=x.userList,O=x.specialPermissionList,h=m.find((function(e){return Object(i.a)(e._id)===a})),v=O.find((function(e){return Object(i.a)(e.userId)===a})),p=Object(l.d)((function(e){return e.setting})).settingsList.find((function(e){return"parameter"===e.type}));return Object(s.useEffect)((function(){t(Object(r.i)()),t(Object(r.h)()),t(Object(o.b)())}),[t]),Object(_.jsx)(u.a,{title:"User: Create a new user | Locals",children:Object(_.jsxs)(c.a,{maxWidth:!e&&"lg",children:[Object(_.jsx)(j.a,{heading:"User Details",links:[{name:"Dashboard",href:d.b.root},{name:"User",href:d.b.user.list},{name:"".concat(h&&h.name)}]}),Object(_.jsx)(D,{currentUser:h,userSpecialPermissions:v,parameterSettings:p}),v&&Object(_.jsx)(E.a,{readOnly:!0,currentUser:h,userSpecialPermissions:v})]})})}}}]);
//# sourceMappingURL=38.5ab0fbf1.chunk.js.map