(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[23],{1297:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n(3),a=n(36),o=n(35),c=n(614),s=n(198),r=n(1267),l=n(37),d=n(0),u=["links","action","heading","moreLink","sx"];function b(t){var e=t.links,n=t.action,b=t.heading,j=t.moreLink,m=void 0===j?[]:j,p=t.sx,h=Object(a.a)(t,u);return Object(d.jsxs)(c.a,{sx:Object(i.a)({mb:5},p),children:[Object(d.jsxs)(c.a,{sx:{display:"flex",alignItems:"center"},children:[Object(d.jsxs)(c.a,{sx:{flexGrow:1},children:[Object(d.jsx)(s.a,{variant:"h4",gutterBottom:!0,children:b}),Object(d.jsx)(l.b,Object(i.a)({links:e},h))]}),n&&Object(d.jsx)(c.a,{sx:{flexShrink:0},children:n})]}),Object(d.jsx)(c.a,{sx:{mt:2},children:Object(o.isString)(m)?Object(d.jsx)(r.a,{href:m,target:"_blank",variant:"body2",children:m}):m.map((function(t){return Object(d.jsx)(r.a,{noWrap:!0,href:t,variant:"body2",target:"_blank",sx:{display:"table"},children:t},t)}))})]})}},1299:function(t,e,n){"use strict";function i(t){return new Promise((function(e){return setTimeout(e,t)}))}n.d(e,"a",(function(){return i}))},1330:function(t,e){e.__esModule=!0,e.default={body:'<path d="M21.02 5H19V2.98c0-.54-.44-.98-.98-.98h-.03c-.55 0-.99.44-.99.98V5h-2.01c-.54 0-.98.44-.99.98v.03c0 .55.44.99.99.99H17v2.01c0 .54.44.99.99.98h.03c.54 0 .98-.44.98-.98V7h2.02c.54 0 .98-.44.98-.98v-.04c0-.54-.44-.98-.98-.98zM16 9.01V8h-1.01c-.53 0-1.03-.21-1.41-.58c-.37-.38-.58-.88-.58-1.44c0-.36.1-.69.27-.98H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8.28c-.3.17-.64.28-1.02.28A2 2 0 0 1 16 9.01zM15.96 19H6a.5.5 0 0 1-.4-.8l1.98-2.63c.21-.28.62-.26.82.02L10 18l2.61-3.48c.2-.26.59-.27.79-.01l2.95 3.68c.26.33.03.81-.39.81z" fill="currentColor"/>',width:24,height:24}},1663:function(t,e,n){"use strict";var i=n(623);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n(628)),o=n(0),c=(0,a.default)((0,o.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");e.default=c},1758:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return ut}));var i=n(1),a=n(1281),o=n(309),c=n(399),s=n(25),r=n(82),l=n(395),d=n(1297),u=n(3),b=n(12),j=n.n(b),m=n(20),p=n(16),h=n(231),x=n(23),O=n(162),g=n(230),v=n(1257),f=n(7),y=n(1261),w=n(1291),I=n(1178),P=n(1240),k=n(198),R=n(1271),S=n(6),L=n(5),M=n(2),H=n(196),W=n(10);n(9),n(239);var A=i.createContext({}),B=n(13),C=n(126),T=n(161),N=n(197);function _(t){return Object(T.a)("MuiImageListItem",t)}var z=Object(N.a)("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),E=n(0),q=["children","className","cols","component","rows","style"],F=Object(f.a)("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:function(t,e){var n=t.styleProps;return[Object(S.a)({},"& .".concat(z.img),e.img),e.root,e[n.variant]]}})((function(t){var e=t.styleProps;return Object(M.a)({display:"inline-block",position:"relative",lineHeight:0},"standard"===e.variant&&{display:"flex",flexDirection:"column"},"woven"===e.variant&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},Object(S.a)({},"& .".concat(z.img),Object(M.a)({objectFit:"cover",width:"100%",height:"100%"},"standard"===e.variant&&{height:"auto",flexGrow:1})))})),V=i.forwardRef((function(t,e){var n=Object(B.a)({props:t,name:"MuiImageListItem"}),a=n.children,o=n.className,c=n.cols,s=void 0===c?1:c,r=n.component,l=void 0===r?"li":r,d=n.rows,u=void 0===d?1:d,b=n.style,j=Object(L.a)(n,q),m=i.useContext(A),p=m.rowHeight,h=void 0===p?"auto":p,x=m.gap,O=m.variant,g="auto";"woven"===O?g=void 0:"auto"!==h&&(g=h*u+x*(u-1));var v=Object(M.a)({},n,{cols:s,component:l,gap:x,rowHeight:h,rows:u,variant:O}),f=function(t){var e=t.classes,n={root:["root",t.variant],img:["img"]};return Object(H.a)(n,_,e)}(v);return Object(E.jsx)(F,Object(M.a)({as:l,className:Object(W.default)(f.root,f[O],o),ref:e,style:Object(M.a)({height:g,gridColumnEnd:"masonry"!==O?"span ".concat(s):void 0,gridRowEnd:"masonry"!==O?"span ".concat(u):void 0,marginBottom:"masonry"===O?x:void 0},b),styleProps:v},j,{children:i.Children.map(a,(function(t){return i.isValidElement(t)?"img"===t.type||Object(C.a)(t,["Image"])?i.cloneElement(t,{className:Object(W.default)(f.img,t.props.className)}):t:null}))}))})),D=n(15);function G(t){return Object(T.a)("MuiImageListItemBar",t)}Object(N.a)("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);var U=["actionIcon","actionPosition","className","subtitle","title","position"],J=Object(f.a)("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:function(t,e){var n=t.styleProps;return[e.root,e["position".concat(Object(D.a)(n.position))]]}})((function(t){var e=t.theme,n=t.styleProps;return Object(M.a)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:e.typography.fontFamily},"bottom"===n.position&&{bottom:0},"top"===n.position&&{top:0},"below"===n.position&&{position:"relative",background:"transparent",alignItems:"normal"})})),K=Object(f.a)("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:function(t,e){var n=t.styleProps;return[e.titleWrap,e["titleWrap".concat(Object(D.a)(n.position))],n.actionIcon&&e["titleWrapActionPos".concat(Object(D.a)(n.actionPosition))]]}})((function(t){var e=t.theme,n=t.styleProps;return Object(M.a)({flexGrow:1,padding:"12px 16px",color:e.palette.common.white,overflow:"hidden"},"below"===n.position&&{padding:"6px 0 12px",color:"inherit"},n.actionIcon&&"left"===n.actionPosition&&{paddingLeft:0},n.actionIcon&&"right"===n.actionPosition&&{paddingRight:0})})),Q=Object(f.a)("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:function(t,e){return e.title}})((function(t){return{fontSize:t.theme.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),X=Object(f.a)("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:function(t,e){return e.subtitle}})((function(t){return{fontSize:t.theme.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),Y=Object(f.a)("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:function(t,e){var n=t.styleProps;return[e.actionIcon,e["actionIconActionPos".concat(Object(D.a)(n.actionPosition))]]}})((function(t){var e=t.styleProps;return Object(M.a)({},"left"===e.actionPosition&&{order:-1})})),Z=i.forwardRef((function(t,e){var n=Object(B.a)({props:t,name:"MuiImageListItemBar"}),i=n.actionIcon,a=n.actionPosition,o=void 0===a?"right":a,c=n.className,s=n.subtitle,r=n.title,l=n.position,d=void 0===l?"bottom":l,u=Object(L.a)(n,U),b=Object(M.a)({},n,{position:d,actionPosition:o}),j=function(t){var e=t.classes,n=t.position,i=t.actionIcon,a=t.actionPosition,o={root:["root","position".concat(Object(D.a)(n))],titleWrap:["titleWrap","titleWrap".concat(Object(D.a)(n)),i&&"titleWrapActionPos".concat(Object(D.a)(a))],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon","actionIconActionPos".concat(Object(D.a)(a))]};return Object(H.a)(o,G,e)}(b);return Object(E.jsxs)(J,Object(M.a)({styleProps:b,className:Object(W.default)(j.root,c),ref:e},u,{children:[Object(E.jsxs)(K,{styleProps:b,className:j.titleWrap,children:[Object(E.jsx)(Q,{className:j.title,children:r}),s?Object(E.jsx)(X,{className:j.subtitle,children:s}):null]}),i?Object(E.jsx)(Y,{styleProps:b,className:j.actionIcon,children:i}):null]}))})),$=n(1263),tt=n(1290),et=n(1251),nt=n(1250),it=n(614),at=n(1663),ot=n.n(at),ct=n(1330),st=n.n(ct),rt=n(21),lt=n(1299);function dt(){var t=Object(O.useSnackbar)().enqueueSnackbar,e=Object(i.useRef)(null),n=Object(i.useState)([]),a=Object(p.a)(n,2),o=a[0],c=a[1],s=Object(i.useState)(null),r=Object(p.a)(s,2),l=r[0],d=r[1],b=Object(f.a)("img")((function(t){return{height:80,minWidth:80,width:"auto",cursor:"pointer",objectFit:"cover",borderRadius:t.theme.shape.borderRadius}})),S=h.b().shape({message:h.d().required("This field is required"),position:h.d().required("This field is required"),coverage:h.d().required("This field is required")}),L=Object(g.c)({enableReinitialize:!0,initialValues:{message:"",posted_at:"public",publisher:"admin",position:"",coverage:150},validationSchema:S,onSubmit:function(){var e=Object(m.a)(j.a.mark((function e(n,i){var a,o,s,r,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.setSubmitting,o=i.resetForm,s=i.setErrors,e.prev=1,e.next=4,Object(lt.a)(500);case 4:if(r=[],!l){e.next=12;break}return e.next=8,rt.a.post("/roomMessages/upload_multi_imgs",l);case 8:u=e.sent,r=u.data.data,c([]),d(null);case 12:return n.imgs=r,e.next=15,rt.a.post("/roomMessages/announcement",n);case 15:o(),a(!1),t("Posted announcement successfully",{variant:"success"}),e.next=26;break;case 20:e.prev=20,e.t0=e.catch(1),console.error(e.t0),a(!1),t("Error occured: ".concat(e.t0.message),{variant:"error"}),s(e.t0);case 26:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t,n){return e.apply(this,arguments)}}()}),M=L.errors,H=L.values,W=L.touched,A=L.handleSubmit,B=L.isSubmitting,C=(L.setFieldValue,L.getFieldProps);return console.log(o),Object(E.jsxs)(g.b,{value:L,children:[Object(E.jsx)(g.a,{noValidate:!0,autoComplete:"off",onSubmit:A,children:Object(E.jsx)(y.a,{container:!0,spacing:3,children:Object(E.jsx)(y.a,{item:!0,xs:12,md:12,children:Object(E.jsx)(w.a,{sx:{p:3},children:Object(E.jsxs)(I.a,{spacing:2,children:[Object(E.jsx)(I.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:Object(E.jsx)(P.a,Object(u.a)(Object(u.a)({},C("message")),{},{maxRows:20,minRows:6,"aria-label":"Post Public Announcement",placeholder:"text input(max. 2000 words)",style:{width:"100%",padding:"10px"}}))}),Object(E.jsxs)(I.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(E.jsx)(k.a,{variant:"body1",component:"div",style:{lineHeight:3},children:"Add pictures (max. 9) from hard-disk."}),Object(E.jsx)(R.a,{size:"small",onClick:function(){9!==o.length?e.current.click():t("Uploaded pictures (max. 9) from hard-disk.",{variant:"info"})},children:Object(E.jsx)(x.a,{icon:st.a,width:24,height:24})})]}),o.length>0&&Object(E.jsx)(I.a,{direction:{xs:"column",sm:"row"},sx:{mt:1,mb:1},spacing:{xs:3,sm:2},children:o.map((function(t){return Object(E.jsxs)(V,{children:[Object(E.jsx)(b,{alt:"attachment",src:"".concat(t.url)},"".concat(t.index)),Object(E.jsx)(Z,{sx:{background:"transparent"},position:"top",actionIcon:Object(E.jsx)(R.a,{sx:{color:"#115293",backgroundColor:"white"},"aria-label":"close",onClick:function(e){return function(t){var e=o.filter((function(e){return e.index!==t})),n=l;n.delete("img[".concat(t,"]")),c(e),d(n)}(t.index)},size:"small",style:{position:"absolute",top:"-15px",right:"-15px"},children:Object(E.jsx)(ot.a,{width:15,height:15})}),actionPosition:"right"})]},"".concat(t.index))}))}),Object(E.jsxs)(I.a,{direction:{xs:"column",sm:"row"},spacing:{xs:10,sm:8},children:[Object(E.jsx)(k.a,{variant:"subtitle1",component:"div",style:{lineHeight:2},children:"Post at"}),Object(E.jsxs)($.a,Object(u.a)(Object(u.a)({},C("posted_at")),{},{"aria-label":"Posted at",children:[Object(E.jsx)(tt.a,{value:"public",control:Object(E.jsx)(et.a,{}),label:"Public chat room"}),Object(E.jsx)(tt.a,{value:"top",control:Object(E.jsx)(et.a,{}),label:"Top column"})]}))]}),Object(E.jsxs)(I.a,{direction:{xs:"column",sm:"row"},spacing:{xs:8,sm:5},children:[Object(E.jsx)(k.a,{variant:"subtitle1",component:"div",style:{lineHeight:2},children:"Publisher"}),Object(E.jsxs)($.a,Object(u.a)(Object(u.a)({},C("publisher")),{},{"aria-label":"Publisher",children:[Object(E.jsx)(tt.a,{value:"admin",control:Object(E.jsx)(et.a,{}),label:"App administrator (default)"}),Object(E.jsx)(tt.a,{value:"user",control:Object(E.jsx)(et.a,{}),label:"User email"})]}))]}),"user"===H.publisher&&Object(E.jsxs)(I.a,{direction:{xs:"column",sm:"row"},spacing:{xs:18,sm:15},children:[Object(E.jsx)(k.a,{variant:"body1",component:"div",style:{lineHeight:2},children:"\xa0"}),Object(E.jsxs)(I.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(E.jsx)(nt.a,Object(u.a)(Object(u.a)({},C("poster_email")),{},{variant:"standard",style:{width:200}})),Object(E.jsx)(k.a,{variant:"body1",component:"div",style:{lineHeight:2},children:"(announcement post by user's name/avatar)"})]})]}),Object(E.jsxs)(I.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(E.jsx)(k.a,{variant:"subtitle1",component:"div",style:{lineHeight:2},children:"Range Setting"}),Object(E.jsxs)(I.a,{spacing:1,children:[Object(E.jsxs)(I.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(E.jsx)(k.a,{variant:"body1",component:"div",style:{lineHeight:2},children:"Center (longitude, latitude)"}),Object(E.jsx)(nt.a,Object(u.a)(Object(u.a)({},C("position")),{},{variant:"standard",style:{width:300},error:Boolean(W.position&&M.position),helperText:W.position&&M.position}))]}),Object(E.jsxs)(I.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(E.jsx)(k.a,{variant:"body1",component:"div",style:{lineHeight:2},children:"Cover people"}),Object(E.jsx)(nt.a,Object(u.a)(Object(u.a)({},C("coverage")),{},{variant:"standard",style:{width:200},error:Boolean(W.coverage&&M.coverage),helperText:W.coverage&&M.coverage})),Object(E.jsx)(k.a,{variant:"body1",component:"div",style:{lineHeight:2},children:"person\uff08 between 0 ~ 1 million )"})]})]})]}),Object(E.jsx)(it.a,{sx:{mt:10,display:"flex",justifyContent:"center"},children:Object(E.jsx)(v.a,{type:"submit",variant:"contained",loading:B,children:"SEND MESSAGE"})})]})})})})}),Object(E.jsx)("input",{type:"file",multiple:!0,ref:e,accept:"image/*",style:{display:"none"},onChange:function(t){var e=[],n=[];o.length>0&&(n=o.map((function(t){return t})));var i=l||new FormData;e.push(t.target.files);for(var a=0,s=o.length>0&&o[o.length-1].index+1||0;a<e[0].length&&n.length<9;a+=1,s+=1){var r=e[0][a];i.append("img[".concat(s,"]"),r,r.name);var u=[];(u=r.name.split(".")).splice(u.length-1,0,"min"),i.append("img[".concat(s,"]"),r,u.join(".")),n.push({index:s,name:r.name,url:URL.createObjectURL(r)})}console.log(n,i),c(n),d(i)}})]})}function ut(){var t=Object(r.a)().themeStretch,e=Object(o.c)();Object(o.d)((function(t){return t.setting})).settingsList;return Object(i.useEffect)((function(){e(Object(c.b)())}),[e]),Object(E.jsx)(l.a,{title:"Announcement: Post | TopTalk",children:Object(E.jsxs)(a.a,{maxWidth:!t&&"lg",children:[Object(E.jsx)(d.a,{heading:"Announcement Post",links:[{name:"Dashboard",href:s.b.root},{name:"Announcement Post"}]}),Object(E.jsx)(dt,{})]})})}}}]);
//# sourceMappingURL=23.82bf8362.chunk.js.map