(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[18],{1297:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(3),r=n(36),i=n(35),c=n(614),o=n(198),s=n(1267),l=n(37),d=n(0),b=["links","action","heading","moreLink","sx"];function j(e){var t=e.links,n=e.action,j=e.heading,u=e.moreLink,p=void 0===u?[]:u,h=e.sx,x=Object(r.a)(e,b);return Object(d.jsxs)(c.a,{sx:Object(a.a)({mb:5},h),children:[Object(d.jsxs)(c.a,{sx:{display:"flex",alignItems:"center"},children:[Object(d.jsxs)(c.a,{sx:{flexGrow:1},children:[Object(d.jsx)(o.a,{variant:"h4",gutterBottom:!0,children:j}),Object(d.jsx)(l.b,Object(a.a)({links:t},x))]}),n&&Object(d.jsx)(c.a,{sx:{flexShrink:0},children:n})]}),Object(d.jsx)(c.a,{sx:{mt:2},children:Object(i.isString)(p)?Object(d.jsx)(s.a,{href:p,target:"_blank",variant:"body2",children:p}):p.map((function(e){return Object(d.jsx)(s.a,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"table"},children:e},e)}))})]})}},1299:function(e,t,n){"use strict";function a(e){return new Promise((function(t){return setTimeout(t,e)}))}n.d(t,"a",(function(){return a}))},1305:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(3),r=n(36),i=n(1269),c=n(198),o=n(0),s=["searchQuery"];function l(e){var t=e.searchQuery,n=void 0===t?"":t,l=Object(r.a)(e,s);return Object(o.jsxs)(i.a,Object(a.a)(Object(a.a)({},l),{},{children:[Object(o.jsx)(c.a,{gutterBottom:!0,align:"center",variant:"subtitle1",children:"Not found"}),Object(o.jsxs)(c.a,{variant:"body2",align:"center",children:["No results found for \xa0",Object(o.jsxs)("strong",{children:['"',n,'"']}),". Try checking for typos or using complete words."]})]}))}},1347:function(e,t,n){"use strict";n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return g}));var a=n(614),r=n(23),i=n(400),c=n.n(i),o=n(0),s=["jpg","jpeg","gif","bmp","png"],l=["m4v","avi","mpg","mp4","webm"],d=["doc","docx"],b=["xls","xlsx"],j=["ppt","pptx"],u=["pdf"],p=["psd"],h=["ai","esp"];function x(e){return e.split(".").pop()}function O(e){return e.substring(e.lastIndexOf("/")+1).replace(/\.[^/.]+$/,"")}function f(e){return e.split("/").pop()}var m=function(e){return Object(o.jsx)(a.a,{component:"img",src:"/static/icons/file/".concat(e,".svg"),alt:e,sx:{width:28,height:28}})};function g(e){var t;switch(function(e){var t;switch(e.includes(x(e))){case s.includes(x(e)):t="image";break;case l.includes(x(e)):t="video";break;case d.includes(x(e)):t="word";break;case b.includes(x(e)):t="excel";break;case j.includes(x(e)):t="powerpoint";break;case u.includes(x(e)):t="pdf";break;case p.includes(x(e)):t="photoshop";break;case h.includes(x(e)):t="illustrator";break;default:t=x(e)}return t}(e)){case"image":t=Object(o.jsx)(a.a,{component:"img",src:e,alt:e,sx:{width:1,height:1}});break;case"video":t=m("file_type_video");break;case"word":t=m("file_type_word");break;case"excel":t=m("file_type_excel");break;case"powerpoint":t=m("file_type_powerpoint");break;case"pdf":t=m("file_type_pdf");break;case"photoshop":t=m("file_type_photoshop");break;case"illustrator":t=m("file_type_ai");break;default:t=Object(o.jsx)(a.a,{component:r.a,icon:c.a,sx:{width:28,height:28}})}return t}},1399:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(16),r=n(36),i=n(3),c=(n(1464),n(1494)),o=n(23),s=n(1),l=n(1465),d=n.n(l),b=n(7),j=n(73),u=n(52),p=n(263),h=n(1271),x=n(0),O=["disabled","value","setValue","alignRight"],f=Object(b.a)("div")({position:"relative"}),m=Object(b.a)("div")((function(e){var t=e.theme;return{bottom:40,overflow:"hidden",position:"absolute",left:t.spacing(-2),boxShadow:t.customShadows.z20,borderRadius:t.shape.borderRadiusMd,"& .emoji-mart":{border:"none",backgroundColor:t.palette.background.paper},"& .emoji-mart-anchor":{color:t.palette.text.disabled,"&:hover, &:focus, &.emoji-mart-anchor-selected":{color:t.palette.text.primary}},"& .emoji-mart-bar":{borderColor:t.palette.divider},"& .emoji-mart-search input":{backgroundColor:"transparent",color:t.palette.text.primary,borderColor:t.palette.grey[50032],"&::placeholder":Object(i.a)(Object(i.a)({},t.typography.body2),{},{color:t.palette.text.disabled})},"& .emoji-mart-search-icon svg":{opacity:1,fill:t.palette.text.disabled},"& .emoji-mart-category-label span":Object(i.a)(Object(i.a)({},t.typography.subtitle2),{},{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",color:t.palette.text.primary,backgroundColor:Object(j.a)(t.palette.background.paper,.8)}),"& .emoji-mart-title-label":{color:t.palette.text.primary},"& .emoji-mart-category .emoji-mart-emoji:hover:before":{backgroundColor:t.palette.action.selected},"& .emoji-mart-emoji":{outline:"none"},"& .emoji-mart-preview-name":{color:t.palette.text.primary},"& .emoji-mart-preview-shortname, .emoji-mart-preview-emoticon":{color:t.palette.text.secondary}}}));function g(e){var t,n=e.disabled,l=e.value,b=e.setValue,j=e.alignRight,g=void 0!==j&&j,v=Object(r.a)(e,O),y=Object(u.a)(),w=Object(s.useState)(!1),k=Object(a.a)(w,2),C=k[0],S=k[1];C&&(t=Object(x.jsx)(c.a,{color:y.palette.primary.main,title:"Pick your emoji\u2026",emoji:"point_up",onSelect:function(e){return b(l+e.native)}}));return Object(x.jsx)(p.a,{onClickAway:function(){S(!1)},children:Object(x.jsxs)(f,Object(i.a)(Object(i.a)({},v),{},{children:[Object(x.jsx)(m,{sx:Object(i.a)({},g&&{right:-2,left:"auto !important"}),children:t}),Object(x.jsx)(h.a,{disabled:n,size:"small",onClick:function(e){e.preventDefault(),S(!C)},children:Object(x.jsx)(o.a,{icon:d.a,width:20,height:20})})]}))})}},1401:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(36),r=n(3),i=n(1),c=n(1466),o=n(1186),s=n(1232),l=n(73),d=n(198),b=n(0),j=["images","photoIndex","setPhotoIndex","isOpen","onClose"],u=Object(o.a)((function(e){var t="rtl"===e.direction,n=function(t){return{backgroundSize:"24px 24px",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:Object(l.a)(e.palette.grey[900],.8),backgroundImage:'url("/static/icons/controls/'.concat(t,'.svg")')}};return Object(s.a)({root:{backdropFilter:"blur(8px)",backgroundColor:Object(l.a)(e.palette.grey[900],.88),"& .ril__toolbar":{height:"auto !important",padding:e.spacing(2,3),backgroundColor:"transparent"},"& .ril__toolbarLeftSide":{display:"none"},"& .ril__toolbarRightSide":{height:"auto !important",padding:0,flexGrow:1,display:"flex",alignItems:"center","& li":{display:"flex",alignItems:"center"},"& li:first-of-type":{flexGrow:1},"& li:not(:first-of-type)":{width:e.spacing(5),height:e.spacing(5),justifyContent:"center",marginLeft:e.spacing(1),borderRadius:e.shape.borderRadius}},"& button:focus":{outline:"none"},"& .ril__toolbarRightSide button":{width:"100%",height:"100%","&.ril__zoomInButton":n("maximize-outline"),"&.ril__zoomOutButton":n("minimize-outline"),"&.ril__closeButton":n("close")},"& .ril__navButtons":{padding:e.spacing(3),borderRadius:e.shape.borderRadiusSm,"&.ril__navButtonPrev":Object(r.a)({left:e.spacing(2),right:"auto"},n(t?"arrow-ios-forward":"arrow-ios-back")),"&.ril__navButtonNext":Object(r.a)({right:e.spacing(2),left:"auto"},n(t?"arrow-ios-back":"arrow-ios-forward"))}}})}));function p(e){var t=e.images,n=e.photoIndex,o=e.setPhotoIndex,s=e.isOpen,l=e.onClose,p=Object(a.a)(e,j),h=u();Object(i.useEffect)((function(){document.body.style.overflow=s?"hidden":"unset"}),[s]);var x=[Object(b.jsx)(d.a,{variant:"subtitle2",children:"".concat(n+1," / ").concat(t.length)})];return Object(b.jsx)(b.Fragment,{children:s&&Object(b.jsx)(c.a,Object(r.a)({mainSrc:t[n],nextSrc:t[(n+1)%t.length],prevSrc:t[(n+t.length-1)%t.length],onCloseRequest:l,onMovePrevRequest:function(){return o((n+t.length-1)%t.length)},onMoveNextRequest:function(){return o((n+1)%t.length)},toolbarButtons:x,reactModalStyle:{overlay:{zIndex:9999}},wrapperClassName:h.root},p))})}},1753:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Dt}));var a=n(1),r=n(1281),i=n(1291),c=n(309),o=n(406),s=n(399),l=n(25),d=n(82),b=n(395),j=n(1297),u=n(16),p=n(23),h=n(1243),x=(n(414),n(1364),n(1459),n(614)),O=(n(1272),n(198)),f=(n(1286),n(1271)),m=n(1179),g=n(1273),v=(n(1275),n(1238),n(1239)),y=(n(1253),n(1237)),w=n(57),k=(n(211),n(401)),C=n(0);var S=n(3),I=n(36),_=n(311),R=n.n(_),P=n(7),T=n(1262),A=n(263),W=n(1288),z=n(1283),L=["query","onChange","onFocus","onClickAway"],B=Object(P.a)("div")((function(e){return{marginTop:e.theme.spacing(2)}})),F=Object(P.a)(T.a)((function(e){var t=e.theme;return{transition:t.transitions.create("box-shadow",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{boxShadow:t.customShadows.z8},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}));function M(e){var t=e.query,n=e.onChange,a=e.onFocus,r=e.onClickAway,i=Object(I.a)(e,L);return Object(C.jsx)(A.a,{onClickAway:r,children:Object(C.jsx)(B,Object(S.a)(Object(S.a)({},i),{},{children:Object(C.jsx)(W.a,{fullWidth:!0,size:"small",children:Object(C.jsx)(F,{value:t,onFocus:a,onChange:n,placeholder:"Search contacts...",startAdornment:Object(C.jsx)(z.a,{position:"start",children:Object(C.jsx)(x.a,{component:p.a,icon:R.a,sx:{color:"text.disabled"}})})})})}))})}var D=n(27),E=n(35),G=n(1780),q=n(1285),U=n(1259),N=["isSelected","conversation","onSelectConversation","isOpenSidebar"],K=Object(P.a)(y.a)((function(e){var t=e.theme;return{padding:t.spacing(1.5,3),transition:t.transitions.create("all")}})),V=Object(P.a)("div")({position:"relative",width:48,height:48,"& .MuiAvatar-img":{borderRadius:"50%"},"& .MuiAvatar-root":{width:"100%",height:"100%"}});function H(e){var t=e.isSelected,n=e.conversation,a=e.onSelectConversation,r=e.isOpenSidebar,i=Object(I.a)(e,N),c=function(e,t){var n=e.participants.filter((function(e){return e.id!==t})),a=n.reduce((function(e,t){return[].concat(Object(D.a)(e),[t.name])}),[]).join(", "),r="",i=e.messages[e.messages.length-1];if(i){var c=i.senderId===t?"You: ":"",o="image"===i.contentType?"Sent a photo":i.body;r="".concat(c).concat(o)}return{otherParticipants:n,displayNames:a,displayText:r}}(n,"8864c717-587d-472a-929a-8e5f298024da-0"),o=Object(E.last)(n.messages).createdAt,s=c.otherParticipants.length>1,l=n.unreadCount>0,d=s&&c.otherParticipants.map((function(e){return e.status})).includes("online");return Object(C.jsxs)(K,Object(S.a)(Object(S.a)({disableGutters:!0,onClick:a,sx:Object(S.a)({},t&&{bgcolor:"action.selected"})},i),{},{children:[Object(C.jsx)(q.a,{children:Object(C.jsxs)(x.a,{sx:Object(S.a)({},s&&{position:"relative",width:48,height:48,"& .avatarWrapper":{position:"absolute",width:32,height:32,"&:nth-of-type(1)":{left:0,zIndex:9,bottom:2,"& .MuiAvatar-root":{border:function(e){return"solid 2px ".concat(e.palette.background.paper)}}},"&:nth-of-type(2)":{top:2,right:0}}}),children:[c.otherParticipants.slice(0,2).map((function(e){return Object(C.jsxs)(V,{className:"avatarWrapper",children:[Object(C.jsx)(U.a,{alt:e.name,src:e.avatar}),!s&&Object(C.jsx)(k.a,{status:e.status,sx:{right:2,bottom:2,position:"absolute"}})]},e._id)})),d&&Object(C.jsx)(k.a,{status:"online",sx:{right:2,bottom:2,position:"absolute"}})]})}),r&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(v.a,{primary:c.displayNames,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondary:c.displayText,secondaryTypographyProps:{noWrap:!0,variant:l?"subtitle2":"body2",color:l?"textPrimary":"textSecondary"}}),Object(C.jsxs)(x.a,{sx:{ml:2,height:44,display:"flex",alignItems:"flex-end",flexDirection:"column"},children:[Object(C.jsx)(x.a,{sx:{mb:1.25,fontSize:12,lineHeight:"22px",whiteSpace:"nowrap",color:"text.disabled"},children:Object(G.a)(new Date(o),{addSuffix:!1})}),l&&Object(C.jsx)(k.a,{status:"unread",size:"small"})]})]})]}))}var Q=n(32),J=["conversations","isOpenSidebar","activeConversationId"];function Y(e){var t=e.conversations,n=e.isOpenSidebar,a=e.activeConversationId,r=Object(I.a)(e,J),i=Object(Q.h)();return Object(C.jsx)(g.a,Object(S.a)(Object(S.a)({disablePadding:!0},r),{},{children:t.allIds.map((function(e){return Object(C.jsx)(H,{isOpenSidebar:n,conversation:t.byId[e],isSelected:a===e,onSelectConversation:function(){return function(e){var n="",a=t.byId[e];n="GROUP"===a.type?a._id:a.participants.find((function(e){return"8864c717-587d-472a-929a-8e5f298024da-0"!==e._id})).username,i("".concat(l.b.chat.root,"/").concat(n))}(e)}},e)}))}))}var $=n(1460),X=n.n($),Z=n(1461),ee=n.n(Z),te=n(1365),ne=n.n(te),ae=n(73),re=n(1769),ie=n(1770),ce=n(1250),oe=n(1305),se=["contacts","recipients","onAddRecipient"],le=Object(P.a)("div")((function(e){return{display:"flex",alignItems:"center",padding:e.theme.spacing(2,3)}})),de=Object(P.a)("div")((function(e){var t=e.theme;return{"& .MuiAutocomplete-root":{minWidth:280,marginLeft:t.spacing(2),"&.Mui-focused .MuiAutocomplete-inputRoot":{boxShadow:t.customShadows.z8}},"& .MuiAutocomplete-inputRoot":{transition:t.transitions.create("box-shadow",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}}));function be(e){var t=e.contacts,n=e.recipients,r=e.onAddRecipient,i=Object(I.a)(e,se),c=Object(a.useState)(""),o=Object(u.a)(c,2),s=o[0],l=o[1];return Object(C.jsxs)(le,Object(S.a)(Object(S.a)({},i),{},{children:[Object(C.jsx)(O.a,{variant:"subtitle2",sx:{color:"text.secondary"},children:"To:"}),Object(C.jsx)(de,{children:Object(C.jsx)(re.a,{multiple:!0,size:"small",disablePortal:!0,popupIcon:null,clearText:null,noOptionsText:Object(C.jsx)(oe.a,{searchQuery:s}),onChange:function(e,t){l(""),r&&r(t)},onInputChange:function(e){l(e.target.value)},options:t,getOptionLabel:function(e){return e.name},renderOption:function(e,t,n){var a=n.inputValue,r=n.selected,i=t.name,c=t.avatar,o=ee()(i,a),s=X()(i,o);return Object(C.jsxs)("li",Object(S.a)(Object(S.a)({},e),{},{children:[Object(C.jsxs)(x.a,{sx:{width:32,height:32,overflow:"hidden",borderRadius:"50%",position:"relative"},children:[Object(C.jsx)(U.a,{alt:i,src:c}),Object(C.jsx)(x.a,{sx:Object(S.a)({top:0,opacity:0,width:"100%",height:"100%",display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",bgcolor:function(e){return Object(ae.a)(e.palette.grey[900],.8)},transition:function(e){return e.transitions.create("opacity",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.shorter})}},r&&{opacity:1,color:"primary.main"}),children:Object(C.jsx)(p.a,{icon:ne.a,width:20,height:20})})]}),Object(C.jsx)(x.a,{sx:{ml:2}}),s.map((function(e,t){return Object(C.jsx)(O.a,{variant:"subtitle2",color:e.highlight?"primary":"textPrimary",children:e.text},t)}))]}))},renderTags:function(e,t){return e.map((function(e,n){var a=e.id,r=e.name,i=e.avatar;return Object(C.jsx)(ie.a,Object(S.a)({size:"small",label:r,color:"info",avatar:Object(C.jsx)(U.a,{alt:r,src:i})},t({index:n})),a)}))},renderInput:function(e){return Object(C.jsx)(ce.a,Object(S.a)(Object(S.a)({},e),{},{placeholder:0===n.length?"Recipients":""}))}})})]}))}var je=n(1462),ue=n.n(je),pe=n(1333),he=n.n(pe),xe=n(1300),Oe=n.n(xe),fe=n(136),me=n.n(fe),ge=n(1779),ve=n(1267),ye=n(233),we=n(37),ke=["participants"],Ce=Object(P.a)("div")((function(e){return{flexShrink:0,minHeight:92,display:"flex",alignItems:"center",padding:e.theme.spacing(0,3)}}));function Se(e){var t=e.participants,n=Object(D.a)(t)[0];return void 0===n?null:Object(C.jsxs)(x.a,{sx:{display:"flex",alignItems:"center"},children:[Object(C.jsxs)(x.a,{sx:{position:"relative"},children:[Object(C.jsx)(U.a,{src:n.avatar,alt:n.name}),Object(C.jsx)(k.a,{status:n.status,sx:{position:"absolute",right:2,bottom:2}})]}),Object(C.jsxs)(x.a,{sx:{ml:2},children:[Object(C.jsx)(O.a,{variant:"subtitle2",children:n.name}),Object(C.jsx)(O.a,{variant:"body2",sx:{color:"text.secondary"},children:"offline"!==n.status?Object(h.a)(n.status):Object(ye.d)(n.lastActivity)})]})]})}function Ie(e){var t=e.participants;return Object(C.jsxs)("div",{children:[Object(C.jsx)(ge.a,{max:3,sx:{mb:.5,"& .MuiAvatar-root":{width:32,height:32}},children:t.map((function(e){return Object(C.jsx)(U.a,{alt:e.name,src:e.avatar},e.id)}))}),Object(C.jsx)(ve.a,{variant:"body2",underline:"none",component:"button",color:"text.secondary",onClick:function(){},children:Object(C.jsxs)(x.a,{sx:{display:"flex",alignItems:"center"},children:[t.length," persons",Object(C.jsx)(p.a,{icon:me.a})]})})]})}function _e(e){var t=e.participants,n=Object(I.a)(e,ke),a=t.length>1;return Object(C.jsxs)(Ce,Object(S.a)(Object(S.a)({},n),{},{children:[a?Object(C.jsx)(Ie,{participants:t}):Object(C.jsx)(Se,{participants:t}),Object(C.jsx)(x.a,{sx:{flexGrow:1}}),Object(C.jsx)(we.d,{children:Object(C.jsx)(p.a,{icon:he.a,width:20,height:20})}),Object(C.jsx)(we.d,{children:Object(C.jsx)(p.a,{icon:ue.a,width:20,height:20})}),Object(C.jsx)(we.d,{children:Object(C.jsx)(p.a,{icon:Oe.a,width:20,height:20})})]}))}var Re=n(12),Pe=n.n(Re),Te=n(20),Ae=n(1187),We=(n(1463),n(1366)),ze=n.n(We),Le=(n(1346),n(1330),n(1282)),Be=n(21),Fe=n(1399),Me=["disabled","conversationId","onSend","conversationKey"],De=Object(P.a)("div")((function(e){return{minHeight:56,display:"flex",position:"relative",alignItems:"center",paddingLeft:e.theme.spacing(2)}}));function Ee(e){var t=e.disabled,n=e.conversationId,r=e.onSend,i=e.conversationKey,s=Object(I.a)(e,Me),l=Object(c.c)(),d=Object(a.useRef)(null),b=Object(a.useState)(""),j=Object(u.a)(b,2),h=j[0],x=j[1],O=Object(w.a)().user,g=function(){var e=Object(Te.a)(Pe.a.mark((function e(){var t,a,c;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return","");case 2:if(!r){e.next=10;break}return t=window.localStorage.getItem("accessToken"),a={headers:{Authorization:"Bearer ".concat(t)}},r({conversationId:n,messageId:Object(Ae.a)(),message:h,contentType:"text",attachments:[],createdAt:new Date,senderId:O}),e.next=8,Be.a.post("/chat/messages/new",{conversationId:n,attachments:[],message:h,conversationKey:i},a);case 8:c=e.sent,l(Object(o.d)(c.data.conversationKey));case 10:return e.abrupt("return",x(""));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(De,Object(S.a)(Object(S.a)({},s),{},{children:[Object(C.jsx)(Le.a,{disabled:t,fullWidth:!0,value:h,disableUnderline:!0,onKeyUp:function(e){"Enter"===e.key&&g()},onChange:function(e){x(e.target.value)},placeholder:"Type a message",startAdornment:Object(C.jsx)(z.a,{position:"start",children:Object(C.jsx)(Fe.a,{disabled:t,value:h,setValue:x})}),sx:{height:"100%"}}),Object(C.jsx)(m.a,{orientation:"vertical",flexItem:!0}),Object(C.jsx)(f.a,{color:"primary",disabled:!h,onClick:g,sx:{mx:1},children:Object(C.jsx)(p.a,{icon:ze.a,width:24,height:24})}),Object(C.jsx)("input",{type:"file",ref:d,style:{display:"none"}})]}))}var Ge=["message","conversation","onOpenLightbox"],qe=Object(P.a)("div")((function(e){return{display:"flex",marginBottom:e.theme.spacing(3)}})),Ue=Object(P.a)("div")((function(e){var t=e.theme;return{maxWidth:320,padding:t.spacing(1.5),marginTop:t.spacing(.5),borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.neutral}})),Ne=Object(P.a)(O.a)((function(e){var t=e.theme;return{display:"flex",marginBottom:t.spacing(.75),color:t.palette.text.secondary}})),Ke=Object(P.a)("img")((function(e){return{height:200,minWidth:296,width:"100%",cursor:"pointer",objectFit:"cover",borderRadius:e.theme.shape.borderRadius}}));function Ve(e){var t=e.message,n=e.conversation,a=e.onOpenLightbox,r=Object(I.a)(e,Ge);console.log(t);var i=n.participants.find((function(e){return e._id===t.senderId._id})),c="8864c717-587d-472a-929a-8e5f298024da-0"===t.senderId?{type:"me"}:{avatar:i.avatarUrl,name:i.name},o="me"===c.type,s="image"===t.contentType,l=c.name&&c.name.split(" ")[0];return Object(C.jsx)(qe,Object(S.a)(Object(S.a)({},r),{},{children:Object(C.jsxs)(x.a,{sx:Object(S.a)({display:"flex"},o&&{ml:"auto"}),children:["me"!==c.type&&Object(C.jsx)(U.a,{alt:c.name,src:c.avatar,sx:{width:32,height:32}}),Object(C.jsxs)(x.a,{sx:{ml:2},children:[Object(C.jsxs)(Ne,{noWrap:!0,variant:"caption",sx:Object(S.a)({},o&&{justifyContent:"flex-end"}),children:[!o&&"".concat(l,","),"\xa0",Object(G.a)(new Date(t.createdAt),{addSuffix:!0})]}),Object(C.jsx)(Ue,{sx:Object(S.a)({},o&&{color:"grey.800",bgcolor:"primary.lighter"}),children:s?Object(C.jsx)(Ke,{alt:"attachment",src:t.body,onClick:function(){return a(t.body)}}):Object(C.jsx)(O.a,{variant:"body2",children:t.body})})]})]})}))}var He=n(97),Qe=n(1401);function Je(e){var t=e.conversation,n=Object(a.useRef)(),r=Object(a.useState)(!1),i=Object(u.a)(r,2),c=i[0],o=i[1],s=Object(a.useState)(null),l=Object(u.a)(s,2),d=l[0],b=l[1];Object(a.useEffect)((function(){n.current&&(n.current.scrollTop=n.current.scrollHeight)}),[t.messages]);var j=t.messages.filter((function(e){return"image"===e.contentType})).map((function(e){return e.body})),p=function(e){var t=Object(E.findIndex)(j,(function(t){return t===e}));o(!0),b(t)};return Object(C.jsxs)(He.a,{scrollableNodeProps:{ref:n},sx:{p:3,flexGrow:1},children:[t.messages.map((function(e){return Object(C.jsx)(Ve,{message:e,conversation:t,onOpenLightbox:p},e._id)})),Object(C.jsx)(Qe.a,{images:j,photoIndex:d,setPhotoIndex:b,isOpen:c,onClose:function(){return o(!1)}})]})}var Ye=n(312),$e=n.n(Ye),Xe=n(52),Ze=n(1228),et=n(164),tt=n.n(et),nt=n(394),at=n(504);n(1347),Object(P.a)("div")((function(e){return{flexGrow:1,height:"100%",display:"flex",overflow:"hidden",flexDirection:"column",paddingBottom:e.theme.spacing(2)}})),Object(P.a)("div")((function(e){var t=e.theme;return{display:"flex",alignItems:"center",marginTop:t.spacing(2),padding:t.spacing(0,2.5)}})),Object(P.a)("div")((function(e){var t=e.theme;return{width:40,height:40,flexShrink:0,display:"flex",overflow:"hidden",alignItems:"center",justifyContent:"center",color:t.palette.text.secondary,borderRadius:t.shape.borderRadius,backgroundColor:t.palette.grey[50016]}})),Object(P.a)(nt.a)((function(e){var t=e.theme;return Object(S.a)(Object(S.a)({},t.typography.overline),{},{height:40,flexShrink:0,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled})}));var rt=n(1367),it=n.n(rt),ct=n(1323),ot=n.n(ct),st=n(1178),lt=["participants","isCollapse","onCollapse"],dt=Object(P.a)(nt.a)((function(e){var t=e.theme;return Object(S.a)(Object(S.a)({},t.typography.overline),{},{height:40,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled})})),bt=Object(P.a)(p.a)((function(e){return{width:16,height:16,marginTop:4,color:e.theme.palette.text.secondary}})),jt=Object(P.a)(O.a)((function(e){var t=e.theme;return Object(S.a)({flexGrow:1,maxWidth:160,wordWrap:"break-word"},t.typography.body2)}));function ut(e){var t=e.participants,n=e.isCollapse,a=e.onCollapse,r=Object(I.a)(e,lt),i=Object(D.a)(t)[0];return void 0===i?null:Object(C.jsxs)(x.a,Object(S.a)(Object(S.a)({},r),{},{children:[Object(C.jsxs)(x.a,{sx:{pt:4,pb:3,display:"flex",alignItems:"center",flexDirection:"column"},children:[Object(C.jsx)(U.a,{alt:i.name,src:i.avatar,sx:{width:96,height:96}}),Object(C.jsxs)(x.a,{sx:{mt:2,textAlign:"center"},children:[Object(C.jsx)(O.a,{variant:"subtitle1",children:i.name}),Object(C.jsx)(O.a,{variant:"body2",sx:{color:"text.secondary"},children:i.position})]})]}),Object(C.jsx)(m.a,{}),Object(C.jsx)(dt,{fullWidth:!0,color:"inherit",onClick:a,endIcon:Object(C.jsx)(p.a,{icon:n?tt.a:me.a,width:16,height:16}),children:"information"}),Object(C.jsx)(at.a,{in:n,children:Object(C.jsxs)(st.a,{spacing:2,sx:{p:2.5,pt:1},children:[Object(C.jsxs)(st.a,{direction:"row",spacing:1,children:[Object(C.jsx)(bt,{icon:it.a}),Object(C.jsx)(jt,{children:i.address})]}),Object(C.jsxs)(st.a,{direction:"row",spacing:1,children:[Object(C.jsx)(bt,{icon:he.a}),Object(C.jsx)(jt,{children:i.phone})]}),Object(C.jsxs)(st.a,{direction:"row",spacing:1,children:[Object(C.jsx)(bt,{icon:ot.a}),Object(C.jsx)(jt,{children:i.email})]})]})})]}))}var pt=n(1415),ht=n(199),xt=["participant","isOpen","onClose"],Ot=Object(P.a)("div")((function(e){return{display:"flex",alignItems:"center",justifyContent:"center",marginTop:e.theme.spacing(1.5)}})),ft=Object(P.a)(p.a)((function(e){var t=e.theme;return{width:16,height:16,marginRight:t.spacing(1),color:t.palette.text.secondary}}));function mt(e){var t=e.participant,n=e.isOpen,a=e.onClose,r=Object(I.a)(e,xt),i=t.name,c=t.avatar,o=t.position,s=t.address,l=t.phone,d=t.email;return Object(C.jsx)(ht.b,Object(S.a)(Object(S.a)({fullWidth:!0,maxWidth:"xs",open:n,onClose:a},r),{},{children:Object(C.jsxs)(pt.a,{sx:{pb:5,textAlign:"center"},children:[Object(C.jsx)(U.a,{alt:i,src:c,sx:{mt:5,mb:2,mx:"auto",width:96,height:96}}),Object(C.jsx)(O.a,{variant:"h6",children:i}),Object(C.jsx)(O.a,{variant:"body2",paragraph:!0,sx:{color:"text.secondary"},children:o}),Object(C.jsxs)(Ot,{children:[Object(C.jsx)(ft,{icon:it.a}),Object(C.jsx)(O.a,{variant:"body2",children:s})]}),Object(C.jsxs)(Ot,{children:[Object(C.jsx)(ft,{icon:he.a}),Object(C.jsx)(O.a,{variant:"body2",children:l})]}),Object(C.jsxs)(Ot,{children:[Object(C.jsx)(ft,{icon:ot.a}),Object(C.jsx)(O.a,{variant:"body2",children:d})]})]})}))}var gt=["participants","selectUserId","onShowPopupUserInfo","isCollapse","onCollapse"],vt=Object(P.a)(nt.a)((function(e){var t=e.theme;return Object(S.a)(Object(S.a)({},t.typography.overline),{},{height:40,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled})}));function yt(e){var t=e.participant,n=e.isOpen,a=e.onClosePopup,r=e.onShowPopup,i=t.name,c=t.avatar,o=t.status,s=t.position;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(y.a,{disableGutters:!0,onClick:r,sx:{height:64,px:2.5},children:[Object(C.jsx)(q.a,{children:Object(C.jsxs)(x.a,{sx:{position:"relative",width:40,height:40},children:[Object(C.jsx)(U.a,{alt:i,src:c}),Object(C.jsx)(k.a,{status:o,sx:{right:0,bottom:0,position:"absolute"}})]})}),Object(C.jsx)(v.a,{primary:i,secondary:s,primaryTypographyProps:{variant:"subtitle2",noWrap:!0},secondaryTypographyProps:{noWrap:!0}})]}),Object(C.jsx)(mt,{participant:t,isOpen:n,onClose:a})]})}function wt(e){var t=e.participants,n=e.selectUserId,a=e.onShowPopupUserInfo,r=e.isCollapse,i=e.onCollapse,c=Object(I.a)(e,gt);return Object(C.jsxs)(x.a,Object(S.a)(Object(S.a)({},c),{},{children:[Object(C.jsxs)(vt,{fullWidth:!0,disableRipple:!0,color:"inherit",onClick:i,endIcon:Object(C.jsx)(p.a,{icon:r?tt.a:me.a,width:16,height:16}),children:["In room (",t.length,")"]}),Object(C.jsx)(x.a,{sx:{height:r?256:0},children:Object(C.jsx)(He.a,{children:Object(C.jsx)(at.a,{in:r,children:Object(C.jsx)(g.a,{disablePadding:!0,children:t.map((function(e){return Object(C.jsx)(yt,{participant:e,isOpen:n===e.id,onShowPopup:function(){return a(e.id)},onClosePopup:function(){return a(null)}},e.id)}))})})})})]}))}var kt=["conversation","participants"],Ct=Object(P.a)("div")((function(e){var t=e.theme;return{width:240,flexShrink:0,display:"flex",position:"relative",flexDirection:"column",borderLeft:"solid 1px ".concat(t.palette.divider),transition:t.transitions.create("width")}})),St=Object(P.a)("div")((function(e){var t=e.theme;return{borderRight:0,display:"flex",overflow:"hidden",position:"absolute",alignItems:"center",top:t.spacing(1),left:t.spacing(-4),width:t.spacing(4),height:t.spacing(4),justifyContent:"center",boxShadow:t.customShadows.z8,border:"solid 1px ".concat(t.palette.divider),borderTopLeftRadius:t.shape.borderRadius,backgroundColor:t.palette.background.paper,borderBottomLeftRadius:t.shape.borderRadius}}));function It(e){e.conversation;var t=e.participants,n=Object(I.a)(e,kt),r=Object(Xe.a)(),i=Object(Ze.a)(r.breakpoints.down("lg")),c=Object(a.useState)(!0),o=Object(u.a)(c,2),s=o[0],l=o[1],d=Object(a.useState)(!0),b=Object(u.a)(d,2),j=b[0],h=b[1],x=Object(a.useState)(null),O=Object(u.a)(x,2),g=O[0],v=O[1],y=Object(a.useState)(!0),w=Object(u.a)(y,2),k=(w[0],w[1],Object(a.useState)(!0)),_=Object(u.a)(k,2),R=_[0],P=_[1],T=t.length>1;return Object(a.useEffect)((function(){return l(!i)}),[i]),Object(C.jsxs)(Ct,Object(S.a)(Object(S.a)({sx:Object(S.a)({},!s&&{width:0,"& > *":{overflow:"hidden"}})},n),{},{children:[Object(C.jsx)(St,{children:Object(C.jsx)(f.a,{onClick:function(){return l(!s)},children:Object(C.jsx)(p.a,{width:16,height:16,icon:s?me.a:$e.a})})}),T?Object(C.jsx)(wt,{selectUserId:g,participants:t,isCollapse:R,onShowPopupUserInfo:function(e){return v(e)},onCollapse:function(){return P((function(e){return!e}))}}):Object(C.jsx)(ut,{participants:t,isCollapse:j,onCollapse:function(){return h((function(e){return!e}))}}),Object(C.jsx)(m.a,{})]}))}function _t(e){var t=e.query,n=e.results,a=e.onSelectContact,r=n.length>0;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(O.a,{paragraph:!0,variant:"subtitle1",sx:{px:3,color:"text.secondary"},children:"Contacts"}),Object(C.jsx)(g.a,{disablePadding:!0,children:n.map((function(e){return Object(C.jsxs)(y.a,{onClick:function(){return a(e)},sx:{py:1.5,px:3},children:[Object(C.jsx)(q.a,{children:Object(C.jsx)(U.a,{alt:e.name,src:e.avatar})}),Object(C.jsx)(v.a,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e._id)}))}),!r&&Object(C.jsx)(oe.a,{searchQuery:t,sx:{p:3,mx:"auto",width:"calc(100% - 48px)",bgcolor:"background.neutral"}})]})}n(1306);var Rt=Object(P.a)("div")((function(e){var t=e.theme;return{width:320,flexShrink:0,display:"flex",flexDirection:"column",transition:t.transitions.create("width"),borderRight:"1px solid ".concat(t.palette.divider)}}));function Pt(){var e=Object(Xe.a)(),t=Object(Q.h)(),n=Object(Ze.a)(e.breakpoints.down("md")),r=Object(a.useState)(!0),i=Object(u.a)(r,2),o=i[0],s=i[1],d=Object(a.useState)(""),b=Object(u.a)(d,2),j=b[0],h=b[1],O=Object(a.useState)([]),f=Object(u.a)(O,2),m=f[0],g=f[1],v=Object(a.useState)(!1),y=Object(u.a)(v,2),w=y[0],k=y[1],I=j&&w,_=Object(c.d)((function(e){return e.chat})),R=_.conversations,P=_.activeConversationId;console.log(P),Object(a.useEffect)((function(){return s(!n)}),[n]),Object(a.useEffect)((function(){if(!o)return k(!1)}),[o]);var T=function(){var e=Object(Te.a)(Pe.a.mark((function e(t){var n,a;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.target.value,h(n),!n){e.next=10;break}return e.next=6,Be.a.get("/chat/search",{params:{query:n}});case 6:a=e.sent,g(a.data.results),e.next=11;break;case 10:g([]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e){k(!1),h(""),t("".concat(l.b.chat.root,"/").concat(e))};return Object(C.jsxs)(Rt,{sx:Object(S.a)({},!o&&{width:96}),children:[Object(C.jsxs)(x.a,{sx:{py:2,px:3},children:[Object(C.jsxs)(x.a,{sx:{display:"flex",alignItems:"center"},children:[o&&Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(x.a,{sx:{flexGrow:1}})}),Object(C.jsx)(we.d,{onClick:function(){return s(!o)},children:Object(C.jsx)(p.a,{width:20,height:20,icon:o?$e.a:me.a})})]}),o&&Object(C.jsx)(M,{query:j,onFocus:function(){k(!0)},onChange:T,onClickAway:function(){k(!1),h("")}})]}),Object(C.jsx)(He.a,{children:I?Object(C.jsx)(_t,{query:j,results:m,onSelectContact:function(e){A&&A(e.username)}}):Object(C.jsx)(Y,{conversations:R,isOpenSidebar:o,activeConversationId:P,sx:Object(S.a)({},w&&{display:"none"})})})]})}function Tt(){var e=Object(c.c)(),t=Object(Q.h)(),n=Object(Q.g)().pathname,r=Object(Q.i)().conversationKey,i=Object(c.d)((function(e){return e.chat})),s=i.contacts,d=i.recipients,b=i.participants,j=i.activeConversationId,u=Object(c.d)((function(e){return function(e){var t=e.chat,n=t.conversations,a=t.activeConversationId;return n.byId[a]||{id:null,messages:[],participants:[],unreadMessages:0}}(e)})),p=r?"DETAIL":"COMPOSE",h=b.filter((function(e){return"8864c717-587d-472a-929a-8e5f298024da-0"!==e._id}));Object(a.useEffect)((function(){r?function(){var n=Object(Te.a)(Pe.a.mark((function n(){return Pe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(Object(o.f)(r));try{e(Object(o.d)(r))}catch(a){console.error(a),t(l.b.chat.new)}case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()():j&&e(Object(o.i)())}),[r]),Object(a.useEffect)((function(){j&&e(Object(o.g)(j))}),[e,j]);var O=function(){var t=Object(Te.a)(Pe.a.mark((function t(n){return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e(Object(o.h)(n))}catch(a){console.error(a)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsxs)(x.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:["DETAIL"===p?Object(C.jsx)(_e,{participants:h}):Object(C.jsx)(be,{recipients:d,contacts:Object.values(s.byId),onAddRecipient:function(t){e(Object(o.a)(t))}}),Object(C.jsx)(m.a,{}),Object(C.jsxs)(x.a,{sx:{flexGrow:1,display:"flex",overflow:"hidden"},children:[Object(C.jsxs)(x.a,{sx:{display:"flex",flexGrow:1,flexDirection:"column"},children:[Object(C.jsx)(Je,{conversation:u}),Object(C.jsx)(m.a,{}),Object(C.jsx)(Ee,{conversationId:j,conversationKey:r,onSend:O,disabled:n===l.b.chat.new})]}),"DETAIL"===p&&Object(C.jsx)(It,{conversation:u,participants:h})]})]})}var At=n(231),Wt=n(162),zt=n(230),Lt=n(1257),Bt=n(1261),Ft=n(1299);function Mt(e){var t=e.chatSettings,n=(Object(Q.h)(),Object(Wt.useSnackbar)().enqueueSnackbar),a=At.b().shape({admin_message:At.d().required("This field is required")}),r=Object(zt.c)({enableReinitialize:!0,initialValues:{admin_message:(null===t||void 0===t?void 0:t.settings.admin_message)||"Please leave a message, I will reply to you as soon as possible. You may talk about anything: advertising, complaining, suggestions, advice, cooperation, etc."},validationSchema:a,onSubmit:function(){var e=Object(Te.a)(Pe.a.mark((function e(t,a){var r,i;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.setSubmitting,a.resetForm,i=a.setErrors,e.prev=1,e.next=4,Object(Ft.a)(500);case 4:return e.next=6,Be.a.put("/settings/chat",t);case 6:r(!1),n("Update success",{variant:"success"}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),r(!1),i(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()}),c=r.errors,o=(r.values,r.touched),s=r.handleSubmit,l=r.isSubmitting,d=(r.setFieldValue,r.getFieldProps);return Object(C.jsx)(zt.b,{value:r,children:Object(C.jsx)(zt.a,{noValidate:!0,autoComplete:"off",onSubmit:s,children:Object(C.jsx)(Bt.a,{container:!0,spacing:3,children:Object(C.jsx)(Bt.a,{item:!0,xs:12,md:12,children:Object(C.jsx)(i.a,{sx:{p:3},children:Object(C.jsx)(st.a,{spacing:3,children:Object(C.jsxs)(st.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(C.jsx)(ce.a,Object(S.a)(Object(S.a)({fullWidth:!0,label:"Admin Message",multiline:!0,minRows:2,maxRows:4},d("admin_message")),{},{error:Boolean(o.message&&c.message),helperText:o.message&&c.message})),Object(C.jsx)(Lt.a,{type:"submit",variant:"contained",loading:l,children:"Save"})]})})})})})})})}function Dt(){var e=Object(d.a)().themeStretch,t=Object(c.c)(),n=Object(c.d)((function(e){return e.setting})).settingsList.find((function(e){return"chat"===e.type}));return Object(a.useEffect)((function(){t(Object(o.e)()),t(Object(o.c)()),t(Object(s.b)())}),[t]),Object(C.jsx)(b.a,{title:"Chat | Locals",children:Object(C.jsxs)(r.a,{maxWidth:!e&&"xl",children:[Object(C.jsx)(j.a,{heading:"Chat",links:[{name:"Dashboard",href:l.b.root},{name:"Chat"}]}),Object(C.jsx)(Mt,{chatSettings:n}),Object(C.jsxs)(i.a,{sx:{height:"72vh",display:"flex"},children:[Object(C.jsx)(Pt,{}),Object(C.jsx)(Tt,{})]})]})})}}}]);
//# sourceMappingURL=18.4a301764.chunk.js.map