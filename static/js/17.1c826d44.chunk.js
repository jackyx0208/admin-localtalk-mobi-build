(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[17],{1297:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n=a(3),i=a(36),r=a(35),c=a(614),o=a(198),s=a(1267),l=a(37),d=a(0),u=["links","action","heading","moreLink","sx"];function j(e){var t=e.links,a=e.action,j=e.heading,b=e.moreLink,h=void 0===b?[]:b,f=e.sx,g=Object(i.a)(e,u);return Object(d.jsxs)(c.a,{sx:Object(n.a)({mb:5},f),children:[Object(d.jsxs)(c.a,{sx:{display:"flex",alignItems:"center"},children:[Object(d.jsxs)(c.a,{sx:{flexGrow:1},children:[Object(d.jsx)(o.a,{variant:"h4",gutterBottom:!0,children:j}),Object(d.jsx)(l.b,Object(n.a)({links:t},g))]}),a&&Object(d.jsx)(c.a,{sx:{flexShrink:0},children:a})]}),Object(d.jsx)(c.a,{sx:{mt:2},children:Object(r.isString)(h)?Object(d.jsx)(s.a,{href:h,target:"_blank",variant:"body2",children:h}):h.map((function(e){return Object(d.jsx)(s.a,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"table"},children:e},e)}))})]})}},1305:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(3),i=a(36),r=a(1269),c=a(198),o=a(0),s=["searchQuery"];function l(e){var t=e.searchQuery,a=void 0===t?"":t,l=Object(i.a)(e,s);return Object(o.jsxs)(r.a,Object(n.a)(Object(n.a)({},l),{},{children:[Object(o.jsx)(c.a,{gutterBottom:!0,align:"center",variant:"subtitle1",children:"Not found"}),Object(o.jsxs)(c.a,{variant:"body2",align:"center",children:["No results found for \xa0",Object(o.jsxs)("strong",{children:['"',a,'"']}),". Try checking for typos or using complete words."]})]}))}},1415:function(e,t,a){"use strict";var n=a(5),i=a(2),r=a(1),c=(a(9),a(10)),o=a(196),s=a(7),l=a(13),d=a(161),u=a(197);function j(e){return Object(d.a)("MuiDialogContent",e)}Object(u.a)("MuiDialogContent",["root","dividers"]);var b=a(0),h=["className","dividers"],f=Object(s.a)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:function(e,t){var a=e.styleProps;return[t.root,a.dividers&&t.dividers]}})((function(e){var t=e.theme,a=e.styleProps;return Object(i.a)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},a.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat(t.palette.divider),borderBottom:"1px solid ".concat(t.palette.divider)}:{".MuiDialogTitle-root + &":{paddingTop:0}})})),g=r.forwardRef((function(e,t){var a=Object(l.a)({props:e,name:"MuiDialogContent"}),r=a.className,s=a.dividers,d=void 0!==s&&s,u=Object(n.a)(a,h),g=Object(i.a)({},a,{dividers:d}),O=function(e){var t=e.classes,a={root:["root",e.dividers&&"dividers"]};return Object(o.a)(a,j,t)}(g);return Object(b.jsx)(f,Object(i.a)({className:Object(c.default)(O.root,r),styleProps:g,ref:t},u))}));t.a=g},1457:function(e,t,a){"use strict";var n=a(42),i=a(0);t.a=Object(n.a)(Object(i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},1495:function(e,t,a){"use strict";var n=a(2),i=a(5),r=a(1),c=(a(9),a(10)),o=a(196),s=a(198),l=a(7),d=a(13),u=a(161),j=a(197);function b(e){return Object(u.a)("MuiDialogTitle",e)}Object(j.a)("MuiDialogTitle",["root"]);var h=a(408),f=a(0),g=["className","id"],O=Object(l.a)(s.a,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,t){return t.root}})({padding:"16px 24px",flex:"0 0 auto"}),p=r.forwardRef((function(e,t){var a=Object(d.a)({props:e,name:"MuiDialogTitle"}),s=a.className,l=a.id,u=Object(i.a)(a,g),j=a,p=function(e){var t=e.classes;return Object(o.a)({root:["root"]},b,t)}(j),m=r.useContext(h.a).titleId,x=void 0===m?l:m;return Object(f.jsx)(O,Object(n.a)({component:"h2",className:Object(c.default)(p.root,s),styleProps:j,ref:t,variant:"h6",id:x},u))}));t.a=p},1496:function(e,t,a){"use strict";var n=a(5),i=a(2),r=a(1),c=(a(9),a(10)),o=a(196),s=a(7),l=a(13),d=a(161),u=a(197);function j(e){return Object(d.a)("MuiDialogActions",e)}Object(u.a)("MuiDialogActions",["root","spacing"]);var b=a(0),h=["className","disableSpacing"],f=Object(s.a)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:function(e,t){var a=e.styleProps;return[t.root,!a.disableSpacing&&t.spacing]}})((function(e){var t=e.styleProps;return Object(i.a)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),g=r.forwardRef((function(e,t){var a=Object(l.a)({props:e,name:"MuiDialogActions"}),r=a.className,s=a.disableSpacing,d=void 0!==s&&s,u=Object(n.a)(a,h),g=Object(i.a)({},a,{disableSpacing:d}),O=function(e){var t=e.classes,a={root:["root",!e.disableSpacing&&"spacing"]};return Object(o.a)(a,j,t)}(g);return Object(b.jsx)(f,Object(i.a)({className:Object(c.default)(O.root,r),styleProps:g,ref:t},u))}));t.a=g},1702:function(e,t){t.__esModule=!0,t.default={body:'<g fill="currentColor"><rect x="4" y="18" width="16" height="2" rx="1" ry="1"/><rect x="3" y="17" width="4" height="2" rx="1" ry="1" transform="rotate(-90 5 18)"/><rect x="17" y="17" width="4" height="2" rx="1" ry="1" transform="rotate(-90 19 18)"/><path d="M12 15a1 1 0 0 1-.58-.18l-4-2.82a1 1 0 0 1-.24-1.39a1 1 0 0 1 1.4-.24L12 12.76l3.4-2.56a1 1 0 0 1 1.2 1.6l-4 3a1 1 0 0 1-.6.2z"/><path d="M12 13a1 1 0 0 1-1-1V4a1 1 0 0 1 2 0v8a1 1 0 0 1-1 1z"/></g>',width:24,height:24}},1755:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ue}));var n=a(16),i=a(35),r=a(23),c=a(1),o=a(566),s=a.n(o),l=a(1702),d=a.n(l),u=a(162),j=a(52),b=a(1281),h=a(394),f=a(1291),g=a(1709),O=a(1710),p=a(1714),m=a(1712),x=a(1713),v=a(1178),w=a(198),S=a(1763),C={_origin:"https://api.emailjs.com"},y=function(e,t,a){if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!a)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0},M=a(38),k=function e(t){Object(M.a)(this,e),this.status=t.status,this.text=t.responseText},L=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(n,i){var r=new XMLHttpRequest;r.addEventListener("load",(function(e){var t=e.target,a=new k(t);200===a.status||"OK"===a.text?n(a):i(a)})),r.addEventListener("error",(function(e){var t=e.target;i(new k(t))})),r.open("POST",C._origin+e,!0),Object.keys(a).forEach((function(e){r.setRequestHeader(e,a[e])})),r.send(t)}))},_=function(e,t,a,n){var i=n||C._userID,r=function(e){var t;if(!(t="string"===typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t}(a);y(i,e,t);var c=new FormData(r);return c.append("lib_version","3.2.0"),c.append("service_id",e),c.append("template_id",t),c.append("user_id",i),L("/api/v1.0/email/send-form",c)},R=a(309),D=a(399),T=a(403),B=a(25),I=a(82),N=a(57),P=a(395),q=(a(396),a(97)),F=a(1305),W=a(1297),A=a(3),E=a(1521),V=a(1711),z=a(1768),U=a(614),H=a(0);function Q(e){var t=e.order,a=e.orderBy,n=(e.rowCount,e.headLabel),i=(e.numSelected,e.onRequestSort);e.onSelectAllClick;return Object(H.jsx)(V.a,{children:Object(H.jsxs)(m.a,{children:[Object(H.jsx)(x.a,{padding:"checkbox"}),n.map((function(e){return Object(H.jsx)(x.a,{align:e.alignRight?"right":"left",sortDirection:a===e.id&&t,children:Object(H.jsxs)(z.a,{hideSortIcon:!0,active:a===e.id,direction:a===e.id?t:"asc",onClick:(n=e.id,function(e){i(e,n)}),children:[e.label,a===e.id?Object(H.jsx)(U.a,{sx:Object(A.a)({},E.a),children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}a(311),a(1316),a(1351);var J=a(7),G=a(1279),K=a(1262),X=Object(J.a)(G.a)((function(e){return{height:96,display:"flex",justifyContent:"space-between",padding:e.theme.spacing(0,1,0,3)}})),Y=Object(J.a)(K.a)((function(e){var t=e.theme;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320,boxShadow:t.customShadows.z8},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}));function Z(e){e.numSelected;var t=e.filterLocation,a=e.onFilterLocation,n=e.filterCoverage,i=e.onFilterCoverage,r=e.filterBalance,c=e.onFilterBalance,o=e.filterCredit,s=e.onFilterCredit;Object(j.a)().palette.mode;return Object(H.jsxs)(X,{children:[Object(H.jsx)(Y,{value:t,onChange:a,placeholder:"Location"}),Object(H.jsx)(Y,{value:n,onChange:i,placeholder:"Coverage \u2265"}),Object(H.jsx)(Y,{value:r,onChange:c,placeholder:"Balance \u2265"}),Object(H.jsx)(Y,{value:o,onChange:s,placeholder:"Credit% \u2265"})]})}var $=a(231),ee=a(1268),te=a(1495),ae=a(1271),ne=a(1415),ie=a(1250),re=a(1496),ce=a(1457),oe=a(230);function se(e){var t=e.mailAddress,a=e.message,i=e.onMessage,r=e.onSend,o=e.onClose,s=Object(c.useState)(!0),l=Object(n.a)(s,2),d=l[0],u=(l[1],$.b().shape({message:$.d().required("This field is required")})),j=Object(oe.c)({enableReinitialize:!0,initialValues:{message:a||""},validationSchema:u}),b=j.errors,f=(j.values,j.touched),g=(j.handleSubmit,j.isSubmitting,j.setFieldValue,j.getFieldProps);return Object(H.jsx)(ee.a,{open:d,onClose:o,maxWidth:"sm",fullWidth:!0,children:Object(H.jsx)(oe.b,{value:j,children:Object(H.jsxs)(oe.a,{noValidate:!0,autoComplete:"off",onSubmit:r,children:[Object(H.jsxs)(te.a,{children:["Mail Send to ",t]}),Object(H.jsx)(U.a,{position:"absolute",top:0,right:0,children:Object(H.jsx)(ae.a,{onClick:o,children:Object(H.jsx)(ce.a,{})})}),Object(H.jsx)(ne.a,{children:Object(H.jsxs)(v.a,{direction:{xs:"column",sm:"row"},spacing:{xs:0,sm:0},children:[Object(H.jsx)(ie.a,{type:"hidden",name:"to_email",value:t}),Object(H.jsx)(ie.a,Object(A.a)(Object(A.a)({fullWidth:!0,label:"Message",multiline:!0,minRows:6,maxRows:6,onChange:i,value:a},g("message")),{},{error:Boolean(f.message&&b.message),helperText:f.message&&b.message}))]})}),Object(H.jsxs)(re.a,{children:[Object(H.jsx)(h.a,{color:"primary",variant:"contained",onClick:o,children:"Cancel"}),Object(H.jsx)(h.a,{color:"secondary",variant:"contained",type:"submit",children:"Send"})]})]})})})}var le=[{id:"email",label:"Mail",alignRight:!1},{id:"address",label:"Location",alignRight:!1},{id:"coverage",label:"Coverage",alignRight:!1},{id:"balance",label:"Balance",alignRight:!1},{id:"credit",label:"Credit %",alignRight:!1},{id:""}];function de(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function ue(){var e=Object(I.a)().themeStretch,t=(Object(j.a)(),Object(R.c)()),a=Object(N.a)(),o=(a.user,a.logout,Object(R.d)((function(e){return e.user})).userList),l=Object(c.useState)(0),C=Object(n.a)(l,2),y=C[0],M=C[1],k=Object(c.useState)("asc"),L=Object(n.a)(k,2),A=L[0],E=L[1],V=Object(c.useState)([]),z=Object(n.a)(V,2),U=z[0],J=z[1],G=Object(c.useState)("email"),K=Object(n.a)(G,2),X=K[0],Y=K[1],$=Object(c.useState)(""),ee=Object(n.a)($,2),te=ee[0],ae=ee[1],ne=Object(c.useState)(""),ie=Object(n.a)(ne,2),re=ie[0],ce=ie[1],oe=Object(c.useState)(""),ue=Object(n.a)(oe,2),je=ue[0],be=ue[1],he=Object(c.useState)(""),fe=Object(n.a)(he,2),ge=fe[0],Oe=fe[1],pe=Object(c.useState)(localStorage.getItem("maillist_rows_per_page")?Number(localStorage.getItem("maillist_rows_per_page")):25),me=Object(n.a)(pe,2),xe=me[0],ve=me[1],we=Object(c.useState)([]),Se=Object(n.a)(we,2),Ce=Se[0],ye=Se[1],Me=(Object(R.d)((function(e){return e.setting})).settingsList,Object(c.useState)(!1)),ke=Object(n.a)(Me,2),Le=ke[0],_e=ke[1],Re=Object(c.useState)(""),De=Object(n.a)(Re,2),Te=De[0],Be=De[1],Ie=Object(c.useState)(""),Ne=Object(n.a)(Ie,2),Pe=Ne[0],qe=Ne[1],Fe=Object(u.useSnackbar)().enqueueSnackbar,We=y>0?Math.max(0,(1+y)*xe-o.length):0;console.log("rendering");var Ae=function(e,t,a){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a?(e=n.map((function(e){return e[0]})),Object(i.filter)(e,(function(e){return"admin"!==e.role&&!(a.deletedUsers&&a.deletedUsers.indexOf(e._id)>-1)&&(!a.filterLocation||-1!==e.address.toLowerCase().indexOf(a.filterLocation.toLowerCase()))&&!(Number(a.filterCoverage)>0&&e.coverage<a.filterCoverage)&&!(Number(a.filterBalance)>0&&e.balance<a.filterBalance)&&!(Number(a.filterCredit)>0&&e.credit<a.filterCredit)}))):n.map((function(e){return e[0]}))}(o,function(e,t){return"desc"===e?function(e,a){return de(e,a,t)}:function(e,a){return-de(e,a,t)}}(A,X),{deletedUsers:Ce,filterLocation:te,filterCoverage:re,filterBalance:je,filterCredit:ge}),Ee=0===Ae.length;Object(c.useEffect)((function(){t(Object(T.i)()),t(Object(D.b)())}),[t]);return Object(H.jsx)(P.a,{title:"Mail: List | Locals",children:Object(H.jsxs)(b.a,{maxWidth:!e&&"lg",children:[Object(H.jsx)(W.a,{heading:"Mail List",links:[{name:"Dashboard",href:B.b.root},{name:"MailList"}],action:Object(H.jsx)(h.a,{variant:"contained",onClick:function(){!function(){console.log("handle download emails");var e=document.createElement("a"),t=Ae.map((function(e){return"".concat(e.email,"\r\n")})),a=new Blob(t,{type:"text/plain"});e.href=URL.createObjectURL(a),e.download="email_list_".concat(Date.now(),".txt"),document.body.appendChild(e),e.click()}()},startIcon:Object(H.jsx)(r.a,{icon:d.a}),children:"Export Email List"})}),Object(H.jsxs)(f.a,{children:[Object(H.jsx)(Z,{numSelected:U.length,filterLocation:te,onFilterLocation:function(e){ae(e.target.value)},filterCoverage:re,onFilterCoverage:function(e){ce(e.target.value)},filterBalance:je,onFilterBalance:function(e){be(e.target.value)},filterCredit:ge,onFilterCredit:function(e){Oe(e.target.value)}}),Object(H.jsx)(q.a,{children:Object(H.jsx)(g.a,{sx:{minWidth:800},children:Object(H.jsxs)(O.a,{children:[Object(H.jsx)(Q,{order:A,orderBy:X,headLabel:le,rowCount:o.length,numSelected:U.length,onRequestSort:function(e,t){E(X===t&&"asc"===A?"desc":"asc"),Y(t)},onSelectAllClick:function(e){if(e.target.checked){var t=o.map((function(e){return e.name}));J(t)}else J([])}}),Object(H.jsxs)(p.a,{children:[Ae.slice(y*xe,y*xe+xe).map((function(e){var t=e._id,a=e.email,n=(e.name,e.avatarUrl,e.role,e.credit),i=e.balance,c=(e.status,e.isVerified,e.coverage),o=(e.country,e.address),l=(e.online,-1!==U.indexOf(a));return Object(H.jsxs)(m.a,{hover:!0,tabIndex:-1,selected:l,"aria-checked":l,children:[Object(H.jsx)(x.a,{component:"td",scope:"row",padding:"none",children:Object(H.jsx)(h.a,{variant:"text",onClick:function(){!function(e,t){var a=Ce;-1===a.indexOf(e)&&a.push(e),ye(a),qe(t)}(t,a)},sx:{color:"text.secondary"},style:{minWidth:"unset",padding:"5px"},children:Object(H.jsx)(r.a,{icon:s.a,width:18,height:18})})}),Object(H.jsx)(x.a,{component:"th",scope:"row",padding:"none",children:Object(H.jsx)(v.a,{direction:"row",alignItems:"center",spacing:2,children:Object(H.jsx)(w.a,{variant:"subtitle2",noWrap:!0,children:a})})}),Object(H.jsx)(x.a,{component:"td",scope:"row",padding:"none",children:o}),Object(H.jsx)(x.a,{component:"td",scope:"row",padding:"none",align:"left",children:Math.floor(c)}),Object(H.jsx)(x.a,{component:"td",scope:"row",padding:"none",align:"left",children:i}),Object(H.jsx)(x.a,{component:"td",scope:"row",padding:"none",align:"left",children:n}),Object(H.jsx)(x.a,{align:"right",children:Object(H.jsx)(h.a,{variant:"contained",onClick:function(){!function(e){Be(""),qe(e),_e(!0)}(a)},children:"Send Message"})})]},t)})),We>0&&Object(H.jsx)(m.a,{style:{height:53*We},children:Object(H.jsx)(x.a,{colSpan:6})})]}),Ee&&Object(H.jsx)(p.a,{children:Object(H.jsx)(m.a,{children:Object(H.jsx)(x.a,{align:"center",colSpan:6,sx:{py:3},children:Object(H.jsx)(F.a,{searchQuery:"".concat(te,", ").concat(re,", ").concat(je,", ").concat(ge)})})})})]})})}),Object(H.jsx)(S.a,{rowsPerPageOptions:[25,50,100],component:"div",count:o.length,rowsPerPage:xe,page:y,onPageChange:function(e,t){M(t)},onRowsPerPageChange:function(e){ve(parseInt(e.target.value,10)),localStorage.setItem("maillist_rows_per_page",parseInt(e.target.value,10)),M(0)}})]}),Le&&Object(H.jsx)(se,{mailAddress:Pe,message:Te,onMessage:function(e){Be(e.target.value)},onSend:function(e){return function(e){_e(!1),e.preventDefault(),_("service_wn9lisb","template_m65qsyc",e.target,"user_MxzB0RTW3TNvE5j2yxcMi").then((function(e){console.log(e),Fe("Send Message Successfully",{variant:"success"})}),(function(e){Fe(e.text,{variant:"error"}),console.log(e.text)}))}(e)},onClose:function(){_e(!1)}})]})})}}}]);
//# sourceMappingURL=17.1c826d44.chunk.js.map